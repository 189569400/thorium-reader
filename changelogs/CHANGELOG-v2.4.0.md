# Thorium Reader v2.4.0

## Summary

Version `2.4.0` was released on **20 March 2024**.

This release includes the following (notable) new features, improvements and bug fixes:

* New user interface locales: Slovenian/Slovenščina, and Danish/Dansk (Thorium is now translated in 25 languages). Also updated the Portuguese (Portugal) and Swedish translations (many thanks to the contributors!). Also fixed a bug with the variants of Chinese (traditional vs. simplified) and Portuguese (Portugal vs. Brazil) related to the "about Thorium" XHTML files which failed to load due to lowercase filenames vs. mixed-case language code.
* Fixed RTL Right-To-Left (Arabic, Hebrew, Japanese in Vertical Writing Mode, etc.) support in the footer bar (interactive reading progression control) and history buttons.
* Support for Japanese vertical writing mode, right-to-left direction. New option to disable RTL inversion in the user interface (several clusters of previous/next controls, play/pause button, interactive reading progression bar). New option to visually hide Ruby superscript, which (by the way) is automatically ignored during text search in order to avoid breaking character sequences inside the baseline Ruby script. Special handling of WBR Word Break Opportunities, in order to implement word-level spacing (note that character-level is now also available, using ReadiumCSS). New font families / typeface options specifically for Japanese language, not shipped in Thorium but automatically prioritised if the fonts are available in the operating system (just as before, the user can select any system font by specifying its name, but this is a different feature which exposes known typefaces that are commonly used on the web as "sensible" defaults for Japanese script, in sans-serif and serif variants for vertical and horizontal writing modes). Compatibility with the TTS readaloud and EPUB Media Overlays features (synchronised text + audio), except "simplified / captions" mode which continues to display text in horizontal writing mode. Ruby superscript / ancilliary content is automatically skipped during TTS (a future version of Thorium will need to flexibly cater for different user experiences by differentiating skippability of page breaks, image descriptions, alternative text for MathML, Ruby superscript, etc.). Improved handling of Japanese publications and documents that do not declare vertical/horizontal writing direction or that incorrectly specify RTL/LTR in the usual expected places (e.g. HTML or BODY elements, package OPF XML). Also added more robust support for publications that declare top-level page-progresion-direction RTL/LTR in the package OPF XML but change direction in some spine item HTML documents (hybrid modes).
* Fixed a number of bugs in TTS readaloud and EPUB Media Overlays which were causing the playback position to jump back to the beginning of the document (for example, when clicking on images without audio).
* Added the possibility to use TTS readaloud with EPUB publications that have Media Overlays (pre-recorded audio), by clicking the play button while holding the SHIFT+ALT key modifiers which is a common keyboard combo already used for several "alt" functionality in Thorium.
* Implemented support for text paragraphs that span across page boundaries when displaying documents in paginated mode with single or two page spreads. Now, bookmarks and other reading locations that accurately select character ranges are restored correctly (before the fix, the containing paragraph HTML element would be designated, causing a confusing shift to the previous page).
* Added handling of diacritics (accented characters) in the "find text" / "search" feature. Essentially, characters like "e" "è" "é" "ë" "ê" etc. are considered equivalent in both the query string and the targeted document text. Also implemented basic transliteration of some common ligatures (for example "egg" in French: Œuf vs. œuf vs. oeuf). More improvements are expected as we gather feedback from users in certain locales, such as with modern German language which features several commonly-used character equivalencies.
* Fixed text search bug related to CDATA in HTML and SVG fragments (e.g. `<style>` contents)
* Significantly improved text highlighting engine which now computes polygons and renders SVG instead of relying on basic HTML + CSS rectangular shapes. This core functionality is used in the "TTS" feature (yellow background for sentences, orange underline for words), in the "find" feature (green background and pink for the active search result) and in the upcoming "annotations" feature (all of which can reliably be used concurrently, as the drawing operations are not desctructive on the HTML/SVG DOM). Currently, 4 different types of highlights are implemented: solid translucent area background, area outline, line-by-line underline and strikethrough. Highlights are lightweight affordances that can overlap and be interacted with using the mouse / tracking device cursor, while allowing for text selection underneath. Highlights can be selectively grouped, either rendered inline (default) or displayed on the periphery of the document content in the form of non-obstructive margin indicators which are also interactive (cursor hover, click). The highlighting engine works with reflowable documents in paginated mode (single or two page spreads), in scrolling viewport, with fixed-layout documents at any zoom level, in right-to-left direction (margin indicators on the right hand side), in left-to-right (margin indicators left-aligned), in vertical writing mode (margin indicators at the top). The highlighting implementation caters for special cases such as Japanese Ruby superscript. The actual "annotations" feature is incomplete at this stage (planned for the next major release Thorium v3.0), but text highlighting text is currently exposed as a hidden feature, available only in developer builds.
* Added support for proof-of-concept sign language EPUB3 Media Overlays (text synchronised with video instead of audio). The prototype features a detachable video frame which can be resized and moved outside of Thorium's window, in order to avoid obscuring the document text during synchronised playback.
* Under the hood, Thorium now ships the latest Electron v29 which bundles Chromium v122 and NodeJS v20. This brings a range of improvements (performance, accessibility, operating system integration, etc.).
* Behind the scenes, React 18 is now used to render Thorium's user interface. Also fixed unnecessary re-renders (small performance improvement gains).
* Apple Silicon native ARM64 (aarch64) builds of Thorium are now available for optimal performance on Mac hardware (M1, M2, M3, etc.). The builds for Intel x64 / x86_64 / amd64 architecture will continue to be available in the foreseable future.
* Added a developer convenience: Linux Docker to build Thorium from MacOS Arm64 and Intel64 hardware.
* Fixed a keyboard shortcut bug which occasionally caused failures to activate after alt-tabbing into other system windows (other applications).
* Fixed handling of hyperlinks during audio playback.
* Fixed TTS continuous playback across document boundaries (now matches EPUB Media Overlays behaviour, for better UX consistency).
* Fixed an occasional Redux state diff crash (RFC lib) with large documents.
* Internal changes in preparation for a significant GUI refactoring which will improve styling, colour themes, etc. (PostCSS deprecation, introduction of SASS toolchain, new UI libraries for popup modals, etc.)
* Fixed Windows filesystem bug (forbidden characters), improved "save as" file selector used for exporting publications.
* Fixed occasional OPDS authentication bug, and display of navigation history / trail.
* Fixed missing APIAPP authentication request header (grant_type=password)

(previous [v2.3.0 changelog](./CHANGELOG-v2.3.0.md))

## Full Change Log

Git commit diff since `v2.3.0`:
https://github.com/edrlab/thorium-reader/compare/v2.3.0...v2.4.0

=> **129** GitHub Git commits:
* [(_)](https://github.com/edrlab/thorium-reader/commit/caa93255eaf51bd16769d27702fc5fc79b285b6c) __fix:__ missing grant_type=password in APIAPP authentication request header
* [(_)](https://github.com/edrlab/thorium-reader/commit/ad41fc04a8a7a2debaa20a17ab979b210b59f2e8) __fix:__ RTL override (UI mirroring) left/right keyboard arrows and icon buttons were inversed
* [(_)](https://github.com/edrlab/thorium-reader/commit/928649d8cb847017594b4eb7c868e03e188ccc58) __chore(NPM):__ package updates
* [(_)](https://github.com/edrlab/thorium-reader/commit/2075a51c527e0ad113c9b6d1b71c5118ed09ff22) __fix(l10n):__ Swedish 'sv' locale translation updates (PR [#2074](https://github.com/edrlab/thorium-reader/pull/2074))
* [(_)](https://github.com/edrlab/thorium-reader/commit/4444e4d7154a0a53a82cb9cf74a9fbd309e7a397) __chore(NPM):__ package updates
* [(_)](https://github.com/edrlab/thorium-reader/commit/67d3a5b290164de5682a25a66d02e08d9420f65b) __fix(CSS):__ Nunito font loading, works with production packaged app and with WebPack development server
* [(_)](https://github.com/edrlab/thorium-reader/commit/82ff1d57abc5ca2120891d30a4b544d52accb55a) __fix(CSS):__ prevent overflow scroll when dragging video Media Overlays frame [skip ci]
* [(_)](https://github.com/edrlab/thorium-reader/commit/9d6491b363b9480649872c69fc8a541ddaa061c1) __chore(dev):__ enable test highlights feature in DEV and CI modes.
* [(_)](https://github.com/edrlab/thorium-reader/commit/cbc9ffc055a9b48beaf6b76a05aa84ad662b61e4) __chore(dev):__ fixed out of date Electron rebuild versions (non critical, as unused), fixed GitHub Actions Continuous Integration flag for debugger / web inspector mode (not quite like command line DEV, strictly-speaking this is production + packaged build which accesses the user's prod database, but we enable devtools), removed unused legacy database code (mkdir)
* [(_)](https://github.com/edrlab/thorium-reader/commit/186ab00292dff7516bbff0cf81e2ae5d2e605f2e) __chore(release):__ v2.4.0 changelog
* [(_)](https://github.com/edrlab/thorium-reader/commit/a2000cc065ed71eda5af177912cc003aa7d8e47b) __fix(UI):__ radio control label width
* [(_)](https://github.com/edrlab/thorium-reader/commit/9601d5eda6128cce1593956f64b17bf4ba2ae879) __feat(l10n):__ Slovenian / Slovene locale, better doc. of language names (PR [#2071](https://github.com/edrlab/thorium-reader/pull/2071) )
* [(_)](https://github.com/edrlab/thorium-reader/commit/d301da83f5f3222c2738e46a3c606c324bd2b97e) __fix(l10n):__ changed Japanese-related translations
* [(_)](https://github.com/edrlab/thorium-reader/commit/f6eb6a4f102799f15438ee4692af5fea054c902e) __feat:__ option to hide Japanese Ruby superscript
* [(_)](https://github.com/edrlab/thorium-reader/commit/f1a776069b218c137b94b0830f0d051ec6c932df) __chore(NPM):__ package updates, notably navigator component with TTS highlight fix for Japanese Ruby superscript (underline removed, background preserved)
* [(_)](https://github.com/edrlab/thorium-reader/commit/6079d8758ee6694a3958dcf8be47c6a13c8b60b0) __chore(NPM):__ package updates, notably navigator component with improved EPUB3 Media Overlays sign language video prototype (detached resizable/movable video frame, outside of the application's window)
* [(_)](https://github.com/edrlab/thorium-reader/commit/8dbd31b4dd3c46d2522f3caeae2a914815c297ea) __fix:__ font selection extended with Japanese options was leaking into non-Japanese locales
* [(_)](https://github.com/edrlab/thorium-reader/commit/9f55332a70965db0d152ed625b2ba07ae2810041) __chore(NPM):__ package updates, notably r2-shared and r2-navigator to introduce prototype MVP EPUB3 Media Overlays video support
* [(_)](https://github.com/edrlab/thorium-reader/commit/1f13e687826aa8d8a2b4557589362662d1aef38c) __chore(NPM):__ package updates, notably navigator component with Japanese WBR Word Break Opportunity handling (requires a small change in Thorium's HTML streamer code to replace WBR with a custom element that can be styled)
* [(_)](https://github.com/edrlab/thorium-reader/commit/351e268d1932e63abc0f63dfd88e44616d625524) __chore(NPM):__ package updates, notably Electron29 (was 28) and navigator component which fixes Japanese letter-spacing and TTS Ruby readaloud skipping
* [(_)](https://github.com/edrlab/thorium-reader/commit/5df5085b364dd99e784cc22a4ef2491de8ac0c67) __hotfix(lint):__ double quotes
* [(_)](https://github.com/edrlab/thorium-reader/commit/9837f9fc1598f0f81a15f6d644612b8c44bf871e) __fix:__ added Japanese font selection as per ReadiumCSS (4 typeface presets / CSS font-family options, vertical/horizontal writing mode, serif/sans)
* [(_)](https://github.com/edrlab/thorium-reader/commit/f8779247101ae05d7ee54b73f13145cb482399ec) __fix(search):__ Japanese Ruby RT/RP exclusion to avoid breaking sequence of contiguous symbols
* [(_)](https://github.com/edrlab/thorium-reader/commit/9a8b842fec4bfb3db548bad4578e593929aadcc9) __fix(l10n):__ added Japanese translation for "disable RTL UI"
* [(_)](https://github.com/edrlab/thorium-reader/commit/4117950bbe7e97fecbdb75fe8c416d4d80e51fac) __feat(highlights):__ new text decoration "outline" (border style) in addition to solid background + underline + strikethrough (updated NPM packages, notably the navigator component which implements the highlights/annotations engine)
* [(_)](https://github.com/edrlab/thorium-reader/commit/c032056319ef7866d1ea3e9b03571d991e23bb6b) __fix:__ support for character-level bookmarks, reading location, search results, annotation highlights, etc. which prevents content jumping in paginated mode due to partially-visible DOM elements at the beginning of page spreads. The actual fix is mostly in the navigator compoenent, thus the NPM package updates in this commit too.
* [(_)](https://github.com/edrlab/thorium-reader/commit/2ad75eb075f39ab814f08846c0706e0702e69f30) __chore(NPM):__ package updates, notably navigator highlights engine line decorations (also switched to random colours instead of predefined set, we need to hand-pick a few that work in both light and dark mode)
* [(_)](https://github.com/edrlab/thorium-reader/commit/0fe01c2f55ccb210471d9416bebab6abe16e2218) __chore(NPM):__ package updates, notably navigator component with fixes in highlights rendering engine
* [(_)](https://github.com/edrlab/thorium-reader/commit/3e8bbce97fba468fea08605ed4b27176a1661c8b) __chore(NPM):__ navigator update (highlights TTS regression)
* [(_)](https://github.com/edrlab/thorium-reader/commit/81f306a2db2c341510b2bfae84a8b3e4ff390cd0) __chore(NPM):__ package updates, notably navigator components with highlight / SVG updates
* [(_)](https://github.com/edrlab/thorium-reader/commit/01b3cd8c9bc9532890fd7543a943fba2db2ea716) __feat(experimental):__ for testing in dev mode only, annotations / highlights (solid, underline, strikethrough) (PR [#2066](https://github.com/edrlab/thorium-reader/pull/2066) )
* [(_)](https://github.com/edrlab/thorium-reader/commit/e2f745ef1a7b6292dd757a9b8f05994dd0a2bb70) __fix:__ search highlights now work in fixed-layout 2-page spreads + various other important TTS and highlights engine improvements from the navigator component (PR [#2065](https://github.com/edrlab/thorium-reader/pull/2065) )
* [(_)](https://github.com/edrlab/thorium-reader/commit/5bc6b42876c5b9eefde10f4a03f9c4cab833f3b3) __chore(dev):__ minor comment related to highlights engine (will support group bundling in next navigator release) [skip ci]
* [(_)](https://github.com/edrlab/thorium-reader/commit/3f82b8926cc58233d262612f89f54c1f5c596483) __fix:__ text search in HTML docs with CDATA (e.g. SVG fragments with <style>)
* [(_)](https://github.com/edrlab/thorium-reader/commit/75fe6d8fdd464283e79f76978f93fbdb7e0f0cc5) __chore(NPM):__ package update, navigator with TTS fixes and a regression bugfix for progression bar (percentage progression on click)
* [(_)](https://github.com/edrlab/thorium-reader/commit/9ff82e6646b02d061de3cf39a8efd17b2b9e41d2) __fix:__ search algorithm, diacritics (accented characters), ligatures (e.g. Œuf œuf oeuf) (Fixes [#1209](https://github.com/edrlab/thorium-reader/issues/1209) )
* [(_)](https://github.com/edrlab/thorium-reader/commit/7510cd33685579c684022bfe047c225b117ebd95) __chore(NPM):__ package updates, notably navigator component which improves TTS readaloud experience
* [(_)](https://github.com/edrlab/thorium-reader/commit/4af89c7202ae9e7d492441831c47a462a9672146) __chore(NPM):__ package update, navigator component which fixes highlights engine (perf and UX improvements)
* [(_)](https://github.com/edrlab/thorium-reader/commit/d715103acd5bbeec1f31a97bd84ce832c8799df9) __chore(NPM):__ navigator package with minor fix
* [(_)](https://github.com/edrlab/thorium-reader/commit/f50e5eda1d99d80df8ec5d9834d8c594446be301) __chore(NPM):__ package lockfile refresh (from Intel MacOS)
* [(_)](https://github.com/edrlab/thorium-reader/commit/3f1b2b81ea06913521732a408186f2c67a02c9ce) __chore(NPM):__ package updates, notably navigator component with ReadiumCSS fixes and highlights margin indicators
* [(_)](https://github.com/edrlab/thorium-reader/commit/8dc6b08d51046aee805e2345519d87dec1f84c70) __chore(NPM):__ updated packages, navigator with RTL/LTR fixes, better support for mixed directions, more robust handling of mismatch in HTML attributes, CSS styles, DOM element depth
* [(_)](https://github.com/edrlab/thorium-reader/commit/53246ed0e549ddb2d270e909d5d6fb42490a1416) __fix(RTL):__ filpped GUI harmonisations in preparation for updated navigator package (coming up next)
* [(_)](https://github.com/edrlab/thorium-reader/commit/97e6d0d5b828a7d60c12fa122425c18eb776b66b) __fix:__ keyboard shortcuts occasionally failed after alt-tabbing into other system windows
* [(_)](https://github.com/edrlab/thorium-reader/commit/360441f8c23dfd871c2c082ec8d514b047174bb2) __fix:__ publications without page-progresion-direction RTL but with document-level RTL are now discovered as the HTML renders, and the GUI is flipped accordingly (unless the users optionally chooses to disable UI flipping)
* [(_)](https://github.com/edrlab/thorium-reader/commit/6b9a033ed51ad2b3cc2507d78075c8018d9a6402) __chore(NPM):__ package updates, including navigator component fixes (regression bug in pagination / audio progression with TTS and Media Overlays), also fixed hyperlinks handling during audio
* [(_)](https://github.com/edrlab/thorium-reader/commit/33ba7a37221c46638ddeae3cb3f955fe8d8d7229) __chore(NPM):__ package update, "navigator" component with fixes that improve TTS and Media Overlays "scroll into view" UX, also addressed edge cases with CSS scroll boundaries
* [(_)](https://github.com/edrlab/thorium-reader/commit/7a496af9d44f1a0a5e6ecd131d2bbfdce8288ef9) __fix:__ occasional Redux state diff crash (RFC lib) with large documents
* [(_)](https://github.com/edrlab/thorium-reader/commit/a253fb46279b76be7cb2dc7bfe8b29f0fe9742ff) __chore(NPM):__ package updates, notably navigator component with TTS readaloud fixes
* [(_)](https://github.com/edrlab/thorium-reader/commit/b9ecda8090fefeca2e75a816da1e57acbf3117f2) __chore(NPM):__ package updates, notably the "navigator" component with significant improvements in Japanese Right To Left Vertical Writing Mode, as well as Media Overlays and Text To Speech readaloud functionality fixes
* [(_)](https://github.com/edrlab/thorium-reader/commit/ac5d7653706e3328857a59f52e47ab99f92a273b) __feat(audio):__ when publication has Media Overlays, TTS readaloud can be forced instead of MO playback by clicking on activation icon button in toolbar with SHIFT+ALT key modifiers (common keyboard combo already used for several "alt" functionality in Thorium)
* [(_)](https://github.com/edrlab/thorium-reader/commit/64bf1e7bb4586509e2aa0db85f08cd61d8f21753) __chore(NPM):__ package updates
* [(_)](https://github.com/edrlab/thorium-reader/commit/304930adbab662a1106d6370c53db339f4219b7b) __fix(RTL):__ flip GUI user preference now works better with reset/save (session stuff)
* [(_)](https://github.com/edrlab/thorium-reader/commit/9fa101639db814863148dac3a69231f655a04836) __feat(RTL):__ allow advanced users (particularly Japanese) to turn off the default Right To Left GUI flipping (progression bar, previous/next buttons, play icon etc.). Some users prefer consistency left/right regardless of vertical-writing-mode top-to-bottom right-to-left content rendering
* [(_)](https://github.com/edrlab/thorium-reader/commit/fe6f976d9286c6b99a43f0ffde33b250d30cd34d) __fix(RTL):__ improved handling in TOC render of language codes to detect RTL besides direction package metadata [skip ci]
* [(_)](https://github.com/edrlab/thorium-reader/commit/f9f196551dfdde0e005a396671b108c0165d9f73) __fix(RTL):__ TTS and Media Overlays play button flipped on x axis, previous/next buttons swapped
* [(_)](https://github.com/edrlab/thorium-reader/commit/b5e6d1c8637121b9a028e5cd69200f4a5d25f7ab) __fix(lint):__ eslint config and css indentation [skip ci]
* [(_)](https://github.com/edrlab/thorium-reader/commit/ba172c63ae8a44b8532f1573f312917c63310abc) __fix:__ RTL Right To Left (Arabic, Hebrew, Japanese in Vertical Writing Mode Top-To-Bottom etc.) now supported in footer progression bar and history buttons
* [(_)](https://github.com/edrlab/thorium-reader/commit/0574c0010ef4e274983e1dc559691aafd64bfdf2) __fix(PDF):__ progression bar wasn't synchronised, React 18 regression (actually a valid behaviour, setState() async batching)
* [(_)](https://github.com/edrlab/thorium-reader/commit/8070d3f1a7d3ccffb440b6fc03cfb432197c5881) __chore(NPM):__ package updates, removed unused postinstall scripts (electron rebuild)
* [(_)](https://github.com/edrlab/thorium-reader/commit/0184839d9e1d24271e339d335eab19f7f15ce177) __chore(NPM):__ package updates, force @parcel/watcher transitive dependency to 2.1.0 from latest 2.4.0 because of binding.gyp NodeGYP build error (seem introduced by node-addon-api)
* [(_)](https://github.com/edrlab/thorium-reader/commit/f404f039b1debb01aeeae49abb46196379a9863c) __chore(NPM):__ package updates, removed ECLINT which is old and security-flagged by dependabot (follow-redirects vulnerability)
* [(_)](https://github.com/edrlab/thorium-reader/commit/5955c6607d2ccfc2757ad721f414789df98b34b7) __feat(l10n):__ Danish localization (PR [#2064](https://github.com/edrlab/thorium-reader/pull/2064) original PR [#2041](https://github.com/edrlab/thorium-reader/pull/2041))
* [(_)](https://github.com/edrlab/thorium-reader/commit/f93493cc065aae44d83f06a0574794699e723407) __fix(l10n):__ Portuguese / Portugal pt-PT translation (PR [#2047](https://github.com/edrlab/thorium-reader/pull/2047))
* [(_)](https://github.com/edrlab/thorium-reader/commit/810ecb26ed26900aed015abaed3fbec0cb38d84c) __chore(dev):__ GitHub release untagged at the point of draft after uploading assets
* [(_)](https://github.com/edrlab/thorium-reader/commit/20be661771a127c94f4fa0a7ca7a8a20390e50a7) __chore(dev):__ GHActions release asset filenames are automatically renamed (spaces to dots), improved release body Markdown
* [(_)](https://github.com/edrlab/thorium-reader/commit/9656c407d565cdebd4522d88851b677675ca2679) __chore(dev):__ GHActions Markdown URL formatting issues in release body
* [(_)](https://github.com/edrlab/thorium-reader/commit/ff6db871136fcc46de96e51f0346dd60608b315c) __chore(dev):__ GitHub Action disable DEBUG and improve release body (asset listing)
* [(_)](https://github.com/edrlab/thorium-reader/commit/41a33ae97e34a4d5472160c21e525b5270b75bed) __fix:__ linting (auto format failed in previous commit)
* [(_)](https://github.com/edrlab/thorium-reader/commit/1283197a76149bb6856e168e257627ca242d8240) __chore(dev):__ GHActions delete old release assets before delete release, list asset download links in new release body
* [(_)](https://github.com/edrlab/thorium-reader/commit/ad116d0d866119da0be0c64188171c7352a0f932) __chore(dev):__ GitHub Action list release assets + delete(TBD)
* [(_)](https://github.com/edrlab/thorium-reader/commit/b43f4d8a5182817bc644d54cb93d4ec8b7234356) __chore(dev):__ GitHubActions CI fix release ID typo
* [(_)](https://github.com/edrlab/thorium-reader/commit/d1b43def6ef2f1d4a932773df1a99031151dec76) __chore(dev):__ GitHub Action 'draft' release toggle ('update' HTTP REST API endpoint), code cleanup (removed obsolete references to Travis and Appveyor)
* [(_)](https://github.com/edrlab/thorium-reader/commit/9d2bf56c181ec3da9634d30c12efdf067313efac) __(tag:__ latest-macos-intel, tag: latest-macos-arm) chore(dev): GitHub Actions restricted GITHUB_TOKEN configured via YAML to selected permissive
* [(_)](https://github.com/edrlab/thorium-reader/commit/1c1f32012004b49fbe5f36d1e71909c067ccfc84) __chore(dev):__ GitHub Actions ENV secret, name change (draft releases still unpublished...)
* [(_)](https://github.com/edrlab/thorium-reader/commit/d78f7e0aac2ebbbedcb2c41bd0b418344a0521fb) __chore(dev):__ GitHub Actions release publish with new token policy
* [(_)](https://github.com/edrlab/thorium-reader/commit/df955f660f137e3913ff1eff0cf9db948f44192c) __chore(dev):__ GitHub Actions Windows special case
* [(_)](https://github.com/edrlab/thorium-reader/commit/992a5dc8b90130077ac1498d99b7352207965239) __chore(dev):__ Apple Silicon MAc GitHub Actions fixed matrix
* [(_)](https://github.com/edrlab/thorium-reader/commit/5ed3362d93d4e0bfcb15546372d2c8d05be3b0a8) __chore(dev):__ GitHub Actions AppleSilicon try again...
* [(_)](https://github.com/edrlab/thorium-reader/commit/656f736b73b633f582442d73fa8c8cf84de74678) __chore(dev):__ Apple Silicon GitHub Action (test)
* [(_)](https://github.com/edrlab/thorium-reader/commit/ad301e5fd76b07841b925bdcc4301fc097f1da41) __chore(NPM):__ package updates
* [(_)](https://github.com/edrlab/thorium-reader/commit/c050a783d2fd8b8532737693f957aaa848282577) __chore(dev):__ minor change, Docker handling of ARM64 vs. X64 target architecture
* [(_)](https://github.com/edrlab/thorium-reader/commit/317c460f023229cde7eeb29f7a49f02348f21d0a) __chore(dev):__ Linux Docker to build on x64/x86_64 and arm64/aarch64
* [(_)](https://github.com/edrlab/thorium-reader/commit/b2cde42dd14ec82033e9662d6a34c4059703cb65) __chore(dev):__ remove unused git info (conflicts in Docker)
* [(_)](https://github.com/edrlab/thorium-reader/commit/39e0b60f550b0f8de5438cddeaedf0ef8d703bf7) __chore(NPM):__ package updates, including R2-* components
* [(_)](https://github.com/edrlab/thorium-reader/commit/de18b9cb86193854ea7aac7d3bd927c397cce408) __chore(NPM):__ package updates
* [(_)](https://github.com/edrlab/thorium-reader/commit/46a4987c7c153f0da2147a84dae9c51d8b530956) __chore(NPM):__ package updates
* [(_)](https://github.com/edrlab/thorium-reader/commit/aa61739484e2608180b2b24903f4d7abf90331f9) __chore(NPM):__ package updates, notably Redux typings, Electron 28 (PR [#2055](https://github.com/edrlab/thorium-reader/pull/2055))
* [(_)](https://github.com/edrlab/thorium-reader/commit/524bfe6e3e31703961842e6c1dbe916ac00bcbd2) __Revert:__ "feat(react): DialogWithRadix base component"
* [(_)](https://github.com/edrlab/thorium-reader/commit/77c64b157fb90ddbace08b8df304a7cdd6935b9f) __fix (css):__ disable dark mode color
* [(_)](https://github.com/edrlab/thorium-reader/commit/9dd2e12b3d3f9a675fc77cc2ee42bf5256b56720) __feat(react):__ DialogWithRadix base component
* [(_)](https://github.com/edrlab/thorium-reader/commit/cb4eee79c3a03ac79e320e83b5d500dfc2df6a6d) __chore(font):__ add NunitoBold 700 font
* [(_)](https://github.com/edrlab/thorium-reader/commit/7ae95af5fa1c912ed3a81e9f5fb3dbf7e44629c3) __fix(sass):__ import sass global scss file in reader app window
* [(_)](https://github.com/edrlab/thorium-reader/commit/b8b37dbec3665468a191030ca8291fd2351f894b) __fix(sass):__ move from node-sass to dart-sass (node-sass is not recommended to use with webpack sass-loader)
* [(_)](https://github.com/edrlab/thorium-reader/commit/4b5ede9a1882501b5d875644f62312b4d1e71ba4) __chore(NPM):__ package updates, using NPM overrides to force NodeSASS v9 on transitive dependency
* [(_)](https://github.com/edrlab/thorium-reader/commit/85f494a40c41877ea4f3de8f4a42e855291291cc) __chore(dev):__ attempt to remediate distutils deprecation in Python 3.12 (node-gyp break)
* [(_)](https://github.com/edrlab/thorium-reader/commit/5d2aa4df96e58e2ca8cae35bf66cdce16513bf9a) __chore(sass):__ move typed-scss to devDep in package.json and run typed-css in style files
* [(_)](https://github.com/edrlab/thorium-reader/commit/5ee65d9053bb8f90828e8ba207c446b2067dd05b) __Revert:__ "chore(sass): move typed-scss to devDep in package.json and run typed-css in style files"
* [(_)](https://github.com/edrlab/thorium-reader/commit/9347c3ae2ea09574749e221a779f47a8ca3f02ce) __chore(sass):__ move typed-scss to devDep in package.json and run typed-css in style files
* [(_)](https://github.com/edrlab/thorium-reader/commit/39f0bea19b5147882359ebcab81822c417224f7d) feat(css) add "Nunito" css font (PR [#2035](https://github.com/edrlab/thorium-reader/pull/2035))
* [(_)](https://github.com/edrlab/thorium-reader/commit/ec61bea801932db157be3886f88f77492797ab52) __feat(reader):__ sync defaultReaderConfig across the 3 processes (main,reader,lib)
* [(_)](https://github.com/edrlab/thorium-reader/commit/f29891143ebfb2fe0dd697804aa9fff6649efad8) __chore(doc):__ README, architecture documentation (PR [#1996](https://github.com/edrlab/thorium-reader/pull/1996))
* [(_)](https://github.com/edrlab/thorium-reader/commit/598518d15e7f161b8b04032d037a90cca9292807) __chore(NPM):__ package updates
* [(_)](https://github.com/edrlab/thorium-reader/commit/7606f918a0842a2e441400349234e3269da558e8) __fix(l10n):__ Swedish correction (PR [#1973](https://github.com/edrlab/thorium-reader/pull/1973))
* [(_)](https://github.com/edrlab/thorium-reader/commit/a7c9f67ae65641eca4f4062c399a6287a03450d6) __fix:__ EPUB / publication export save-as OS file selector (PR [#2036](https://github.com/edrlab/thorium-reader/pull/2036) Fixes [#1975](https://github.com/edrlab/thorium-reader/issues/1975))
* [(_)](https://github.com/edrlab/thorium-reader/commit/924fb534df47e98bde7ef1ff17db5d578183b006) __Feat(css):__ SASS integration (PR [#2007](https://github.com/edrlab/thorium-reader/pull/2007))
* [(_)](https://github.com/edrlab/thorium-reader/commit/df2872c789f3214931dda22d814144fae6cf2cd5) __chore(NPM):__ package updates
* [(_)](https://github.com/edrlab/thorium-reader/commit/b2b41b6c03393f2f43660b81ca8ca24d02f264a8) __Fix(reader):__ enable reader keyboard shortcut on publication info close
* [(_)](https://github.com/edrlab/thorium-reader/commit/0318e8196c29a79f1088152b6ecaaaa7430e0eee) __chore(NPM):__ package updates (minor)
* [(_)](https://github.com/edrlab/thorium-reader/commit/f8da5229cfd1c22cbaaf8ae8628b3d67bb952b18) __feat(dev):__ migration to React 18 (PR [#1693](https://github.com/edrlab/thorium-reader/pull/1693))
* [(_)](https://github.com/edrlab/thorium-reader/commit/a0e4cc12a9f1afeb28df5c8809847ac9c4cf9297) __chore(NPM):__ package updates, Electron 27 (still on React 17)
* [(_)](https://github.com/edrlab/thorium-reader/commit/1f0decaa938b5cdf621da84804fdda193aed6bac) __fix(react):__ improve useApi hook
* [(_)](https://github.com/edrlab/thorium-reader/commit/1d3dc939d1d495540a0482f4e0596dc55d5157cf) __fix(catalog):__ hydrate the catalog (publication/tag) when starting library window. Fixes [#2021](https://github.com/edrlab/thorium-reader/issues/2021)
* [(_)](https://github.com/edrlab/thorium-reader/commit/51914df9fa084235542013a3f6da60b80849e796) __fix(opds):__ reset opds header links at each opds location changed and replace header links during opds navigation, no accumulation. Fixes [#2017](https://github.com/edrlab/thorium-reader/issues/2017)
* [(_)](https://github.com/edrlab/thorium-reader/commit/23fdd654ae67221faa01020c36c268aa7d599eed) __fix(react-hooks):__ update useKeyboardShortcut hooks to call ensureKeyboardListenerIsInstalled in component mount and replace useSyncExternalStore to match precise keyboard state change
* [(_)](https://github.com/edrlab/thorium-reader/commit/d5b27d9431eb52a287c5a0002b648388c5b58e57) __chore(dev):__ code comments regarding React Dev Tools Chrome/Electron extension [skip ci]
* [(_)](https://github.com/edrlab/thorium-reader/commit/7482da34a65dcf9ee352670321cfb8a60b15fb08) __chore:__ file ignore (linter) [skip ci]
* [(_)](https://github.com/edrlab/thorium-reader/commit/7d7a1e480828200bbf0ac20a9edfeda77ebae40d) __fix(react):__ eliminate re-renders of publicationCard and cleanup Cover state code
* [(_)](https://github.com/edrlab/thorium-reader/commit/87d059c8d4ee7fdeab6bee9383c241be6adf2952) __feat(react):__ new react hooks to communicate between functional-component and model/controller (PR [#2002](https://github.com/edrlab/thorium-reader/pull/2002))
* [(_)](https://github.com/edrlab/thorium-reader/commit/c88f70b17d88fd92234f4a7bee4225f4d6b12220) __fix(library):__ Dropzone component re-render too many times on window clic
* [(_)](https://github.com/edrlab/thorium-reader/commit/1d72280ab708fa8ac5ca8ebfbccc0412623d080b) __refactor(API):__ transform publication/getAllTags API to a state loaded in library from an action dispatched in main process updated with catalog/get saga logic (Fixes [#1994](https://github.com/edrlab/thorium-reader/issues/1994))
* [(_)](https://github.com/edrlab/thorium-reader/commit/50cc65551d69d22137aeff5efa00aceb452d0bfb) __refactor(API):__ switch catalog/get API to redux/redux-saga logic (Fixes [#1993](https://github.com/edrlab/thorium-reader/issues/1993))
* [(_)](https://github.com/edrlab/thorium-reader/commit/2374d856712b8315aec2605975aa48bd37398105) __refactor(API):__ switch lcp (renew,return,unlock) to redux-saga logic delete LCP API (FIxes [#1992](https://github.com/edrlab/thorium-reader/issues/1992))
* [(_)](https://github.com/edrlab/thorium-reader/commit/93a79a38601ad6251f0afa80be85dd240d5e7f8f) __refactor(API):__ delete keyboard API Actually not used and already synced across redux State (Fixes [#1991](https://github.com/edrlab/thorium-reader/issues/1991))
* [(_)](https://github.com/edrlab/thorium-reader/commit/dcb98bf62cfbc85a0a0cc12bdfb5606a6d2ab8bd) __refactor(API):__ switch sessionApi to redux state with synchronization across main/renderer delete the session API (Fixes [#1990](https://github.com/edrlab/thorium-reader/issues/1990))
* [(_)](https://github.com/edrlab/thorium-reader/commit/22a49691a23c01b4041f6679dec86e1b36df7b31) __refactor(API):__ move reader/clipboardCopy to redux/reduxSaga and delete reader API (Fixes [#1989](https://github.com/edrlab/thorium-reader/issues/1989))
* [(_)](https://github.com/edrlab/thorium-reader/commit/a9630b9ac64e8d4ed3db7443c9255f2715dc8e34) __feat(TTS):__ readaloud skippability, also updated NPM packages
* [(_)](https://github.com/edrlab/thorium-reader/commit/558dc8a1b67d154ff9cad355a8f1f40df66ffeac) __fix(l10n):__ XHTML "about Thorium" filenames are lower case (Chinese and Portuguese variants were not loading) Fixes [#1969](https://github.com/edrlab/thorium-reader/issues/1969)
* [(_)](https://github.com/edrlab/thorium-reader/commit/20aa64949f7ff22d131195f8aa38c8ebe0704711) __chore(release):__ version 2.4.0-alpha.1

__Developer Notes__:

* The [standard-changelog](https://github.com/conventional-changelog/conventional-changelog/tree/master/packages/standard-changelog) utility (`npx standard-changelog --first-release`) somehow only generates a limited number of commits, so we use a one-liner command line / shell script instead:
* `git --no-pager log --decorate=short --pretty=oneline v2.3.0...v2.4.0 | cut -d " " -f 1- | sed -En '/^([0-9a-zA-Z]+)[[:space:]]([^:]+):(.+)$/!p;s//\1 __\2:__\3/p' | sed -En 's/^(.+)$/* \1/p' | sed -En '/PR[[:space:]]*#([0-9]+)/!p;s//PR [#\1](https:\/\/github.com\/edrlab\/thorium-reader\/pull\/\1)/gp' | sed -En '/\(#([0-9]+)/!p;s//(PR [#\1](https:\/\/github.com\/edrlab\/thorium-reader\/pull\/\1)/gp' | sed -En '/(Fixes|See|Fix|Fixed)[[:space:]]*#([0-9]+)/!p;s//\1 [#\2](https:\/\/github.com\/edrlab\/thorium-reader\/issues\/\2)/gp' | sed -En '/^.[[:space:]]([0-9a-zA-Z]+)[[:space:]]/!p;s//* [(_)](https:\/\/github.com\/edrlab\/thorium-reader\/commit\/\1) /p' | sed -En '/[[:space:]]#([0-9]+)/!p;s// [#\1](https:\/\/github.com\/edrlab\/thorium-reader\/issues\/\1)/gp'`
* ...append `| pbcopy` on MacOS to copy the result into the clipboard.
* ...append `| wc -l` to verify that the result actually matches the number of Git commits.
