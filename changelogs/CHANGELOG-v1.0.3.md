# Thorium Reader v1.0.3

## Summary

Version `1.0.3` was released on **05 September 2019**.

This release includes the following (notable) new features, improvements and bug fixes:

* Tweaked user interface / user experience, based on testers' feedback
* Better support for assistive technology, including the following screen readers:
  * Narrator, JAWS and NVDA on Microsoft Windows
  * Voice Over on MacOS
  * (not tested on Linux)
* Facilitated keyboard-based interaction, shortcuts and visual outlining
* Improved OPDS support (online catalogs / publication feeds), including search, and error messaging (asynchronous HTTP requests, concurrent downloads)
* Cleaned-up language resources (at the moment: English, French, German), to facilitate contributions / UI translations
* Added a Command Line Interface (CLI) to import multiple publications, "open with" or double-click from the file explorer (registered EPUB file extension)
* Better performance and security, latest NPM package dependencies wherever possible
* Improved developer experience:
  * Stricter TypeScript compiler rules (static type checking)
  * Chromium developer tools with integrated Electron debugger, React and Redux extensions, Axe accessibility checker, and "inspect here" popup menu helper
  * Debugger configuration for Visual Studio Code, Electron main and renderer processes
  * Locales management: scripts and workflow to maintain JSON language resources

## Full Change Log

Git commit diff since `v1.0.2`:
https://github.com/readium/readium-desktop/compare/v1.0.2...v1.0.3

=> **139** GitHub Pull Requests or high-level Git commits.

Note that the changelog generated by the [standard-changelog](https://github.com/conventional-changelog/conventional-changelog/tree/master/packages/standard-changelog) utility (`npx standard-changelog --first-release`) only contains a limited number of entries (`84` instead of `139`), so instead here is an exhaustive list of commits created by the following one-liner command line script:
`git --no-pager log --decorate=short --pretty=oneline v1.0.2...v1.0.3 | cut -d " " -f 2- | sed -En "s/^(.*)$/* \1/p" | sed -En "s/^([^:]*):(.*)$/**\1:**\2/p"`

*** (tag:** v1.0.3, origin/master, origin/HEAD, master) chore: version bump 1.0.3
*** fix(dev):** editorconfig linter was failing on Windows (glob file path)
*** fix:** reader side menu, ARIA levels in TOC tree headings, aria-hidden on collapsed sections, list item containment (PR #670 Fixes #569 Fixes #672 Fixes #676)
*** hotfix:** display settings radio buttons are not lists, Fixes #677
*** fix:** scrollbar extend in library view (PR #673 Fixes #505)
*** hotfix:** redundant / duplicate nested list containers in TOC tree, Fixes #671
*** hotfix:** incorrect ARIA role on radio button, Fixes #675
*** hotfix:** PR #667 Screen readers have their own shortcut to activate hyperlinks (e.g. VoiceOver CTRL+OPT+SPACE), consistent focus handling
*** fix:** CSS styles in reader view, font family, etc. (PR #674 Fixes #449)
*** fix:** Keyboard-accessible and screen-reader friendly TOC navigation, and skip-to-main-content in reader view (PR #667 Fixes #565 Fixes #156)
*** feature:** "go to page" in reader view, for EPUB pagelist navigation structure (PR #668 Fixes #82)
*** hotfix:** follow-up to PR #653 ensures Publication Landmarks exist, Fixes #665
*** hotfix(dev):** DevTron dymamically-injected package needs to be in node-externals WebPack directive, Fixes #666
*** fix:** temporarily remove LCP support (PR #662, See #663)
*** fix(ui):** reader options, pagination radio button (PR #661 Fixes #660)
*** fix:** single Electron app instance, with CLI support (PR #606 Fixes #547)
*** chore(dev):** display name in React Higher Order Component (PR #648)
*** fix:** OPDS publication acquisition, check for duplicate / already-imported during download (PR #646 Fixes #538)
*** chore(dev):** R2 package import aliases (PR #658 Fixes #657)
*** hofix:** follow-up to PR #653 to replace TypeScript "any" with correct type.
*** chore:** NPM package updates (minor semver)
*** fix:** reader navigation menu, landmarks instead of list of illstrations (PR #653 Fixes #81)
*** fix:** incorrect PostCSS autoprefixer statement (Fixes #654)
*** fix:** revert console disabling (yargs) (PR #649, reverts PR #485)
*** fix:** Thorium package and executable name (PR #651, related issue #411)
*** fix(a11y):** accessible label for breadcrumb links (PR #650 Fixes #602)
*** fix:** removed unnecessary pointer cursor on publication cover image (PR #652 Fixes #452)
*** chore(dev):** OPDS API typings (PR #617)
*** fix(l10n):** German locale names, script tool to create JSON data from CSV (PR #647 Fixes #430)
*** fix:** OPDS feeds, async HTTP requests with timeouts and error handling, display info to user (PR #542 Fixes #419 Fixes #418)
*** fix:** ensure non-supported CLI parameters (such a Electron/Chromium ones) are ignored during Yargs parsing (PR #607, see https://github.com/readium/readium-desktop/issues/547#issuecomment-520785137)
*** fix:** OPDS feeds, conversion from relative to absolute URLs + handling of opds:// scheme (PR #639)
*** fix(gui):** better focus outline thanks to additional padding (PR #637 Fixes #573)
*** chore(doc):** CLI usage (PR #640 Fixes #584)
*** chore(l10n):** follow-up to PR #641, removed unnecessary Toast code-scanning routine (in i18n-scan script)
*** fix:** "toast" typing and upstream i18next message interpolation (PR #641 Fixes #534)
*** fix:** Linux executable filename (PR #642 Fixes #411)
*** chore(dev):** NPM packages maintenance, minor updates
*** fix:** catalog refresh (recent publications) when reading location changes (PR #635 Fixes #555)
*** fix(a11y):** publication grid view - title+author description on cover image, and dedicated label to announce menu button (PR #633 Fixes #586 Fixes #568)
*** chore(doc, l10n):** README JSON locale scripts
*** fix(ui):** dummy cover (CSS gradient), long title+author text overflow now contained (PR #619 Fixes #491 Fixes #409 partially)
*** chore(dev):** removed unnecessary build step in dev mode (preload script for R2 navigator)
*** chore(dev):** added missing "release" folder removal in clean task, and ensure eclint ignores the release folder (very time consuming lint!)
*** chore(dev):** improved Visual Studio Code main and renderer process debugging (PR #632)
*** chore(dev):** exclude dev-time packages from the production build (WebPack ignore plugin), as the define plugin + minification does not address this use-case (devtron, react-axe-a11y and the devtools extensions installer)
*** chore(dev):** WebPack dev server with Hot Module Reload requires inline source maps (otherwise, no breakpoint debugging in the web inspectors of Electron BrowserWindows)
*** chore(build):** minor hotfix for out-of-date version in package.json for ASAR
*** fix(a11y):** remove incorrect ARIA labels in list of publications (PR #631 Fixes #600)
*** chore(doc):** hotfix README typo (i18n / l10n task / script name)
*** fix(a11y):** ARIA labels, descriptions for previous/next arrow buttons of cover images slider (PR #630, Fixes #585)
*** chore(npm):** minor package updates, mostly patch updates (security, etc. no feature changes) (PR #629)
*** fix(ui):** removed duplicate OPDS header (PR #627 Fixes #591)
*** fix(l10n):** remove duplicated translations, OPDS import publication/sample (PR #628 Fixes #592)
*** fix:** support for .epub3 extension (Fixes #544)
*** fix(ui):** list of catalogs / OPDS feeds, top margin (PR #622 Fixes #609)
*** fix(opds):** short search breadcrumb, root catalog context (PR #620 Fixes #616)
*** fix(l10n):** French translation tweaks (PR #618)
*** hotfix(l10n):** removed debug messages (Fixes #610)
*** fix(a11y):** screen reader modal dialogs and popup menus (Fixes #605)
*** fix(a11y,l10n):** changed untranslated french strings (Fixes #604)
*** fix(a11y):** menu ARIA expanded, and menuitem roles (Fixes #599)
*** fix(dev):** removed unused React component AddEntryForm (Fixes #597)
*** fix:** React iterated key'ed markup, Toasts, Grid and List views (Fixes #562)
*** fix(dev):** ensures React and Redux dev tools are loaded when the BrowserWindow contents are ready
*** chore(dev):** added full WebPack config console debug when building in production
*** chore(dev):** ensures lint task is always called for production builds
*** chore(dev):** NodeJS TypeScript typings was incorrect version (Fixes #595)
*** fix:** language locale applied to HTML document root (Fixes #587)
*** chore(npm):** minor package updates
*** chore(code):** OPDS feed parser lib updated with latest TypeScript typings fix (see https://github.com/NYPL-Simplified/opds-feed-parser/commit/d254de4130725bbe0314cfb731b4d87e79e3528b#r34665675 )
*** fix:** Redux Saga was using deprecated API coding style (now 1.* stable lib, was 0.* alpha) (PR #590)
*** chore(code):** minor variable cleanup
*** feat(dev):** Axe React a11y checker integrated in DEV mode (PR #589 Fixes #87)
*** fix(a11y):** colour contrast, disabled buttons (PR #583 Fixes #574)
*** feat(dev):** httpGet refactor, wrapper to fetch remote resources, with TypeScript typing, and error handling (PR #541)
*** fix:** library list view, consistent line/row height, text ellipsis for long publication descriptions (PR #582 Fixes #553)
*** chore(dev):** app debugging from Visual Studio Code, improved workflow and error reporting (PR #581)
*** chore(doc):** added l10n developer information
*** chore(doc):** fixed build status link
*** chore(l10n):** tooling pass - sort, scan, typed, to sync locales with codebase and make canonical (PR #566)
*** fix:** app/window menu consistent on Windows, Linux (dev utilities only, same as MacOS) (PR #564 Fixes #563)
*** chore(dev):** eliminate Redux Saga deprecation warnings (all effect on array yield)
*** chore(dev):** limit the number of file watchers during hot reloead dev server mode (Linux limited filesystem handles)
*** fix:** MacOS CMD-W to close windows, other menus and dev tools (PR #560 Fixes #454)
*** chore(typo):** MenuButton, Fixes #472
*** fix:** publication tags are normalized (trimmed, whitespace collapsed) Fixes #490
*** fix:** CSS user-select none, except for publication metadata (PR #559 Fixes #525)
*** fix:** added support for .epub3 file extension (Fixes #544)
*** feat(dev):** context menu to inspect element (PR #558 Fixes #545)
*** feat(dev):** devtron integration (PR #557 Fixes #546)
*** NPM update:** i18next (#556)
*** feat:** OPDS feed search (PR #386 Fixes #296)
*** fix:** library view, list mode, click-on-line to open reader (PR #548 Fixes #497)
*** fix:** empty library view (no publications), drag-drop / import message (PR #549 Fixes #537)
*** fix:** OPDS addition/import form (popup modal dialog), invoked from button (PR #550 Fixes #345)
*** fix(a11y):** "skip to main" link style and position (PR #551 Fixes #470)
*** fix:** toast notifications had html unicode escape sequences / charcodes (PR #552 Fixes #453)
*** (leo/develop) chore(dev):** downloader TypeScript typings (PR #543)
*** (pierre/develop) fix (arch):** pass boolean value into react props to indicate when api promise is rejected (known error or unexpected exception) (PR #539)
*** fix:** window rectangle bounds, non-rounded decimal values crash DB backend (PR #536 Fixes #532)
*** fix(l10n):** delete feed vs. publication (PR #533 Fixes #501)
*** hotfix:** reference to Electron BrowserWindow (library view) maintained in new createWindows.ts file split from maint.ts (follow-up to PR #403)
*** fix:** base64 encode / decode errors (PR #531 Fixes #522 Fixes #486)
*** fix:** Fixes #530 confusing console error message for i18n language query from database (missing key)
*** hotfix:** PR #471 duplicate configRepository.save() Fixes #529
*** hotfix:** window resize / move event handling, follow-up to #403 and #524 (bad merge, and uncaught debounce() coding error)
*** chore:** refreshed package-lock.json which had been updated incrementally several times recently
*** fix:** stricter TypeScript and TSLint code checks (PR #404)
*** feat:** CLI Command Line Interface - import EPUBs, OPDS, read EPUBs (PR #403 Fixes #85)
*** fix:** library and reader windows bounds / position + dimensions (PR #524 Fixes #492 Fixes #494)
*** fix(10n):** updated codebase static analyzer to capture dynamic locale keys used in notification toasts (PR #527 Fixes #526)
*** feat:** Microsoft Windows Store AppX images (PR #521)
*** fix:** reader view, navigation (TOC), "title"-only headings should not be clickable, should be inert. (Fixes #520)
*** fix:** updated r2-shared-js NPM package which addresses publications with no resources (only spine items)
*** fix:** package.json version in about info (Fixes #473)
*** fix(l10n):** publication languages shown in the user's locale (Fixes #519)
*** fix:** application / product name in epubReadingSystem info (Fixes #510)
*** chore(code):** consistent use of preprocessor directive / build-time constants (Fixes #511)
*** fix(l10n):** replaced prefix/suffix bash shell script with wrap NodeJS code (Fixes #514)
*** fix(l10n):** replace native shell utility for JSON sort with NodeJS script (Fixes #514)
*** fix(l10n):** removed unused locale keys (static codebase analysis, i18next calls) (#516 Fixes #509)
*** feat(l10n):** typings for i18next JSON locales (PR #518 PR #517)
*** hotfix:** found typo in license header (`node ../r2-utils-js/tools/license_header.js src/`)
*** fix:** JSON locales checking (discover missing and redundant keys) (PR #506 Fixes #397 Fixes #476)
*** chore(code):** reader.tsx cleanup, queryParam, publication URL (PR #513)
*** fix:** reader view, publication info button now works at first opening (PR #512 Fixes #292)
*** fix:** css-hot-loader was in production build (Fixes #432)
*** fix:** unused and misplaced NPM dependencies (PR #504 Fixes #499)
*** fix:** flickering navbar (PR #498)
*** chore:** R2 NPM packages updates (notably, consistent reflect-metadata version for ta-json) (PR #495)
*** fix:** delete publication (in library view) => close opened readers (PR #489 Fixes #448)
*** fix:** migrate deprecated "new Buffer()" API to "Buffer.from()" (PR #487)
*** fix:** disable console functions in PACKAGED mode, in addition to debug() (PR #485)
